@{
    ViewData["Title"] = "Đã xảy ra lỗi";
    string message = TempData["ErrorMessage"] as string ?? "Một lỗi không xác định đã xảy ra.";
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đã xảy ra lỗi</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

    <h2>Đã xảy ra lỗi</h2>
    <p>@ViewBag.ErrorMessage</p>
    <a href="@Url.Action("DSNguoiDung", "User")" class="btn btn-primary">Quay lại danh sách người dùng</a>
    <script>
        // Kiểm tra lỗi từ TempData
        @if (TempData["ErrorMessage"] != null)
        {
            <text>
                Swal.fire({
                    icon: 'error',
                    title: 'Đã xảy ra lỗi',
                    html: '@Html.Raw(TempData["ErrorMessage"])', // Sử dụng html và Html.Raw để hiển thị lỗi mà không mã hóa
                    confirmButtonText: 'Quay lại danh sách đơn hàng',
                    allowOutsideClick: false
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = '@Url.Action("DSDonHang", "OrderManagement")';
                    }
                });
            </text>
        }
    </script>
</body>
</html>
